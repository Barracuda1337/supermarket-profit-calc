<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Supermarket Together Profit Calculator</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <meta name="description" content="Calculate profit and sale prices easily for Supermarket Together game products. Grouped by category with automatic calculation." />
  <meta name="keywords" content="Supermarket Together, profit calculator, price calculator, supermarket game, product pricing, category pricing, online calculator" />
  <meta name="author" content="barracuda1337" />

  <style>
    body {
      background-color: #f8f9fa;
      padding: 2rem 1rem;
    }
    .category-row {
      background-color: #e9f7fe !important;
      font-weight: 600;
    }
    .product-name {
      padding-left: 1.5rem;
      text-align: left;
    }
    .github-star-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #24292e;
      color: #fff;
      padding: 8px 14px;
      border-radius: 25px;
      font-weight: bold;
      font-family: Arial, sans-serif;
      text-decoration: none;
      box-shadow: 0 3px 6px rgba(0,0,0,0.3);
      transition: background-color 0.3s ease;
      z-index: 9999;
    }
    .github-star-btn:hover {
      background-color: #0366d6;
      color: #fff;
    }
    input[type="number"] {
      width: 100%;
      min-width: 80px;
    }
    .steam-btn {
  position: fixed;
  bottom: 70px; /* GitHub butonunun biraz √ºst√ºnde */
  right: 20px;
  background-color: #1b2838;
  color: #fff;
  padding: 8px 14px;
  border-radius: 25px;
  font-weight: bold;
  font-family: Arial, sans-serif;
  text-decoration: none;
  box-shadow: 0 3px 6px rgba(0,0,0,0.3);
  transition: background-color 0.3s ease;
  z-index: 9999;
}
.steam-btn:hover {
  background-color: #171a21;
  color: #67c1f5;
}
  </style>
</head>
<body>

<a href="https://github.com/Barracuda1337/supermarket-profit-calc" target="_blank" rel="noopener" class="github-star-btn" title="Star us on GitHub!">
  ‚≠ê Star on GitHub
</a>
<a href="https://store.steampowered.com/app/2709570/Supermarket_Together/?utm_source=profitcalc" target="_blank" rel="noopener" class="steam-btn" title="View on Steam">
  üõí Play on Steam
</a>
<div class="container bg-white rounded shadow-sm p-4">

  <h2 class="mb-3">Supermarket Together Profit Calculator</h2>
  <p>Products are grouped by category. Enter cost and profit rate to calculate automatically.</p>

  <div class="d-flex flex-wrap align-items-center mb-3 gap-2">
      <input type="text" id="searchInput" class="form-control" placeholder="Search products..." style="max-width: 300px;">
      <button id="exportExcel" class="btn btn-primary">Download as Excel</button>
          <span>Set Profit %: </span>
            <button class="btn btn-sm btn-secondary set-profit-btn" data-rate="20">20%</button>
            <button class="btn btn-sm btn-secondary set-profit-btn" data-rate="30">30%</button>
            <button class="btn btn-sm btn-secondary set-profit-btn" data-rate="40">40%</button>
            <button class="btn btn-sm btn-secondary set-profit-btn" data-rate="50">50%</button>
            <input type="number" id="customProfitInput" class="form-control form-control-sm" style="width: 80px;" min="0" max="999" placeholder="Custom %" />
            <button id="customProfitBtn" class="btn btn-sm btn-primary">Set</button>
  </div>

  <div class="table-responsive">
    <table class="table table-bordered table-hover align-middle">
      <thead class="table-primary">
        <tr>
          <th>Product</th>
          <th>Cost ($)</th>
          <th>Profit (%)</th>
          <th>Sale Price ($)</th>
          <th>Profit ($)</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>

</div>

<!-- SheetJS library for Excel export -->
<script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>

<script>
const productGroups = {
	"Basic Products I": [{
			"name": "Pasta Penne",
			"cost": 2.55
		},
		{
			"name": "Water Bottle",
			"cost": 0.89
		},
		{
			"name": "Honey Cereals",
			"cost": 2.5
		},
		{
			"name": "Rice",
			"cost": 1.45
		},
		{
			"name": "Salt",
			"cost": 0.45
		},
		{
			"name": "Sugar",
			"cost": 1.49
		}
	],
	"Basic Products II": [{
			"name": "Margarine",
			"cost": 2.1
		},
		{
			"name": "Flour",
			"cost": 0.9
		},
		{
			"name": "Apple Juice",
			"cost": 1.85
		},
		{
			"name": "Olive Oil",
			"cost": 7.62
		},
		{
			"name": "Ketchup",
			"cost": 2.35
		},
		{
			"name": "Sliced Bread",
			"cost": 1.7
		},
		{
			"name": "Pepper",
			"cost": 1.17
		}
	],
	"Basic Products III": [{
			"name": "Orange Juice",
			"cost": 2.0
		},
		{
			"name": "Barbaque Sauce",
			"cost": 1.99
		},
		{
			"name": "Mustard Sauce",
			"cost": 2.45
		},
		{
			"name": "Spaghetti Box",
			"cost": 1.55
		},
		{
			"name": "Tuna Pate",
			"cost": 3.79
		},
		{
			"name": "Fiber Cereals",
			"cost": 2.85
		},
		{
			"name": "Supreme Flour",
			"cost": 1.63
		}
	],
	"Basic Products IV": [{
			"name": "Black Coffee",
			"cost": 3.35
		},
		{
			"name": "Egg Box",
			"cost": 2.26
		},
		{
			"name": "Houmous",
			"cost": 1.69
		},
		{
			"name": "White Flour",
			"cost": 1.79
		},
		{
			"name": "Cane Sugar Box",
			"cost": 1.85
		},
		{
			"name": "Sugar",
			"cost": 1.78
		}
	],
	"Basic Products V": [{
			"name": "Macarroni",
			"cost": 1.33
		},
		{
			"name": "Ecologic Sugar",
			"cost": 1.45
		},
		{
			"name": "Brown Sugar",
			"cost": 2.25
		},
		{
			"name": "Olive Oil",
			"cost": 9.25
		},
		{
			"name": "Mash Potatoes",
			"cost": 2.0
		},
		{
			"name": "Potatoe Bag",
			"cost": 5.99
		},
		{
			"name": "Espresso Coffee",
			"cost": 2.85
		},
		{
			"name": "Basmati Rice",
			"cost": 2.35
		},
		{
			"name": "Long Grain Rice",
			"cost": 2.85
		}
	],
	"Basic Products VI": [{
			"name": "Coffee",
			"cost": 3.95
		},
		{
			"name": "Supreme Pasta",
			"cost": 2.55
		},
		{
			"name": "Chocolate Cereals",
			"cost": 3.99
		},
		{
			"name": "Premium Water",
			"cost": 0.95
		},
		{
			"name": "Spring Water",
			"cost": 1.2
		},
		{
			"name": "Powdered Sugar",
			"cost": 2.5
		},
		{
			"name": "Sugar - Big Box",
			"cost": 3.5
		},
		{
			"name": "Brown Sugar - Big Box",
			"cost": 3.6
		}
	],
	"Dairy Products I": [{
			"name": "Emmental Cheese",
			"cost": 1.83
		},
		{
			"name": "Gruyere Cheese",
			"cost": 2.25
		},
		{
			"name": "Skimmed Cheese",
			"cost": 2.35
		},
		{
			"name": "Fruit Yoghurt",
			"cost": 2.6
		},
		{
			"name": "Vanilla Yoghurt",
			"cost": 3.95
		},
		{
			"name": "Milk Brick",
			"cost": 0.91
		}
	],
	"Dairy Products II": [{
			"name": "Butter",
			"cost": 3.65
		},
		{
			"name": "Parmigiano Cheese",
			"cost": 2.1
		},
		{
			"name": "Reggiano Cheese",
			"cost": 2.7
		},
		{
			"name": "Mozzarella Cheese",
			"cost": 2.9
		},
		{
			"name": "Skimmed Yoghurt",
			"cost": 3.5
		}
	],
	"Soda Drinks I": [{
			"name": "Cola Pack",
			"cost": 1.8
		},
		{
			"name": "Soda Pack",
			"cost": 2.1
		},
		{
			"name": "Decaf Soda Pack",
			"cost": 4.0
		},
		{
			"name": "Soda Bottle",
			"cost": 1.5
		},
		{
			"name": "Cola Bottle",
			"cost": 1.8
		},
		{
			"name": "Sugar Free Soda Bottle",
			"cost": 2.25
		},
		{
			"name": "Premium Soda",
			"cost": 3.0
		}
	],
	"Soda Drinks II": [{
			"name": "Orange Soda",
			"cost": 2.25
		},
		{
			"name": "Pineapple Soda",
			"cost": 2.45
		},
		{
			"name": "Tropical Soda",
			"cost": 3.25
		},
		{
			"name": "Green Tea",
			"cost": 2.95
		},
		{
			"name": "Red Tea",
			"cost": 2.45
		},
		{
			"name": "Lemon Tea",
			"cost": 1.85
		},
		{
			"name": "Cold Brew Coffee",
			"cost": 2.95
		}
	],
	"Soda Drinks III": [{
			"name": "Blueberry Energy Drink",
			"cost": 1.95
		},
		{
			"name": "Guava Energy Drink",
			"cost": 1.95
		},
		{
			"name": "Lima Energy Drink",
			"cost": 2.65
		},
		{
			"name": "Fruit Punch Energy Drink",
			"cost": 2.65
		},
		{
			"name": "Mango Energy Drink",
			"cost": 2.65
		},
		{
			"name": "Cola Energy Drink",
			"cost": 2.35
		},
		{
			"name": "Sugar Free Energy Drink",
			"cost": 2.95
		}
	],
	"Frozen Foods I": [{
			"name": "Pizza Barbaque",
			"cost": 2.41
		},
		{
			"name": "Fondue",
			"cost": 2.49
		},
		{
			"name": "Crocanti Ham",
			"cost": 2.87
		},
		{
			"name": "Ham Cheese Crepe",
			"cost": 3.35
		},
		{
			"name": "French Fries",
			"cost": 4.05
		},
		{
			"name": "Crispy Potatoe Pos",
			"cost": 3.99
		},
		{
			"name": "Green Beans",
			"cost": 4.5
		}
	],
	"Frozen Foods II": [{
			"name": "Four Cheese Pizza",
			"cost": 2.49
		},
		{
			"name": "Four Seasons Pizza",
			"cost": 3.19
		},
		{
			"name": "Vegetable Mix",
			"cost": 3.99
		},
		{
			"name": "Chicken Mix",
			"cost": 3.79
		},
		{
			"name": "Bolognaise Lasagna",
			"cost": 3.67
		},
		{
			"name": "Vegetable Lasagna",
			"cost": 3.45
		}
	],
	"Hygiene I": [{
			"name": "Toothpaste",
			"cost": 1.99
		},
		{
			"name": "Toilet Paper",
			"cost": 4.6
		},
		{
			"name": "Hand Soap",
			"cost": 0.99
		},
		{
			"name": "Avocado Shampoo",
			"cost": 2.99
		},
		{
			"name": "Egg Shampoo",
			"cost": 3.49
		},
		{
			"name": "Bath Gel",
			"cost": 2.79
		}
	],
	"Hygiene II": [{
			"name": "Toilet Paper",
			"cost": 4.6
		},
		{
			"name": "Mango Soap",
			"cost": 1.69
		},
		{
			"name": "Extra Soft Shampoo",
			"cost": 2.25
		},
		{
			"name": "Jojoba Honey Shampoo",
			"cost": 2.59
		},
		{
			"name": "Argan Oil Shampoo",
			"cost": 3.99
		}
	],
	"Hygiene III": [{
			"name": "Compact Toilet Paper",
			"cost": 2.5
		},
		{
			"name": "Double Side Toilet Paper",
			"cost": 5.2
		},
		{
			"name": "Lemon Soap",
			"cost": 1.25
		},
		{
			"name": "Premium Bath Gel",
			"cost": 2.65
		},
		{
			"name": "Shampoo For Babies",
			"cost": 3.95
		}
	],
	"Cleaning Products I": [{
			"name": "Detergent",
			"cost": 3.3
		},
		{
			"name": "Stain Remover",
			"cost": 1.9
		},
		{
			"name": "Glass Cleaner",
			"cost": 3.6
		},
		{
			"name": "Detergent Tables",
			"cost": 6.7
		},
		{
			"name": "Dishwasher",
			"cost": 4.6
		},
		{
			"name": "Bleach",
			"cost": 1.2
		},
		{
			"name": "Bleach - Big Bottle",
			"cost": 1.9
		}
	],
	"Cleaning Products II": [{
			"name": "Softener",
			"cost": 3.99
		},
		{
			"name": "Premium Detergent",
			"cost": 4.5
		},
		{
			"name": "Insecticide",
			"cost": 4.1
		},
		{
			"name": "Cleaning Cloths",
			"cost": 0.9
		},
		{
			"name": "Premium Capsules",
			"cost": 7.8
		},
		{
			"name": "Premium Bleach",
			"cost": 2.5
		},
		{
			"name": "Ammonia",
			"cost": 3.1
		}
	],
	"Sweets and Snacks I": [{
			"name": "Cookie Jar",
			"cost": 3.6
		},
		{
			"name": "Maxi Cone",
			"cost": 3.9
		},
		{
			"name": "Chocolate Spread",
			"cost": 1.99
		},
		{
			"name": "Chocolate Powder",
			"cost": 2.89
		},
		{
			"name": "Chips",
			"cost": 1.0
		},
		{
			"name": "Sweet Bonbek",
			"cost": 1.9
		}
	],
	"Sweets and Snacks II": [{
			"name": "Peach Jam",
			"cost": 2.9
		},
		{
			"name": "Ice Cream Box",
			"cost": 4.5
		},
		{
			"name": "Chocolate Box",
			"cost": 10.9
		},
		{
			"name": "Chocolate Biscuit",
			"cost": 4.8
		},
		{
			"name": "Vanilate Biscuit",
			"cost": 5.5
		},
		{
			"name": "Madeleine",
			"cost": 2.7
		}
	],
	"Sweets and Snacks III": [{
			"name": "Strawberry Jam",
			"cost": 3.9
		},
		{
			"name": "Peanut Butter",
			"cost": 3.6
		},
		{
			"name": "Chipos",
			"cost": 1.99
		},
		{
			"name": "Marshmallow",
			"cost": 2.99
		},
		{
			"name": "Lemon Biscuit",
			"cost": 2.45
		},
		{
			"name": "Hazelnut Biscuit",
			"cost": 2.55
		}
	],
	"Sweets and Snacks IV": [{
			"name": "Premium Ice Cream",
			"cost": 5.99
		},
		{
			"name": "Honey",
			"cost": 3.99
		},
		{
			"name": "Premium Chocolate Box",
			"cost": 18.5
		},
		{
			"name": "Foditos",
			"cost": 4.0
		},
		{
			"name": "Premium Cake",
			"cost": 3.8
		}
	],
	"Sweets and Snacks V": [{
			"name": "Basic Strawberry Ice Cream",
			"cost": 3.95
		},
		{
			"name": "Lemon Ice Cream",
			"cost": 3.95
		},
		{
			"name": "Coffee Ice Cream",
			"cost": 3.95
		},
		{
			"name": "Stracciatella Ice Cream",
			"cost": 4.95
		},
		{
			"name": "Strawberry Meringue Ice Cream",
			"cost": 4.95
		},
		{
			"name": "Caramel Ice Cream",
			"cost": 4.95
		}
	],
	"Sweets and Snacks VI": [{
			"name": "Premium Strawberry Ice Cream",
			"cost": 7.45
		},
		{
			"name": "Strawberry Cheesecake Ice Cream",
			"cost": 7.45
		},
		{
			"name": "Premium Caramel Ice Cream",
			"cost": 9.95
		},
		{
			"name": "Pink Strawberry Ice Cream",
			"cost": 9.95
		},
		{
			"name": "Alcoholic Ice Cream",
			"cost": 14.95
		}
	],
	"Meat I": [{
			"name": "Chopped Beef",
			"cost": 3.39
		},
		{
			"name": "Pure Beef",
			"cost": 4.89
		},
		{
			"name": "Veal",
			"cost": 5.9
		},
		{
			"name": "Chicken Wings",
			"cost": 3.99
		},
		{
			"name": "Chicken",
			"cost": 8.99
		},
		{
			"name": "Parma Ham",
			"cost": 3.5
		},
		{
			"name": "Sliced Ham",
			"cost": 2.5
		}
	],
	"Preserves I": [{
			"name": "Peas - Big",
			"cost": 2.99
		},
		{
			"name": "Tuna - Big",
			"cost": 3.95
		},
		{
			"name": "Red Beans",
			"cost": 1.92
		},
		{
			"name": "Cat Food",
			"cost": 5.49
		},
		{
			"name": "Cat Food",
			"cost": 8.1
		},
		{
			"name": "Dog Food",
			"cost": 7.6
		}
	],
	"Preserves II": [{
			"name": "Chickpeas",
			"cost": 1.9
		},
		{
			"name": "Meatballs",
			"cost": 2.2
		},
		{
			"name": "Lentils",
			"cost": 1.95
		},
		{
			"name": "Tomato Soup",
			"cost": 2.35
		},
		{
			"name": "Canned Corn",
			"cost": 1.8
		},
		{
			"name": "Canned Peas",
			"cost": 1.75
		}
	],
	"Infusions I": [{
			"name": "Green Tea",
			"cost": 2.99
		},
		{
			"name": "Lemon Tea",
			"cost": 3.49
		},
		{
			"name": "Black Tea",
			"cost": 3.89
		},
		{
			"name": "Peppermint",
			"cost": 1.99
		},
		{
			"name": "Mint",
			"cost": 2.19
		},
		{
			"name": "Valerian",
			"cost": 1.89
		}
	],
	"Seafood I": [{
			"name": "Big Sushi",
			"cost": 19.99
		},
		{
			"name": "Small Sushi",
			"cost": 13.99
		},
		{
			"name": "Smoked Salmon",
			"cost": 9.99
		},
		{
			"name": "Crab Sticks",
			"cost": 4.79
		}
	],
	"Books Pack I": [{
			"name": "Book - Electromagnetic",
			"cost": 9.99
		},
		{
			"name": "Book - Surprise",
			"cost": 6.99
		},
		{
			"name": "Book - ABC",
			"cost": 7.99
		},
		{
			"name": "Book - Mother and Child",
			"cost": 9.99
		},
		{
			"name": "Book - Colors",
			"cost": 9.99
		},
		{
			"name": "Book - Piticha",
			"cost": 7.99
		}
	],
	"Books Pack II": [{
			"name": "Book - OnceUpon",
			"cost": 7.99
		},
		{
			"name": "Book - Krok",
			"cost": 9.99
		},
		{
			"name": "Book - Adventures",
			"cost": 9.99
		},
		{
			"name": "Book - Donnine",
			"cost": 9.99
		},
		{
			"name": "Book - Vintage",
			"cost": 7.99
		},
		{
			"name": "Book - I Wont Share",
			"cost": 9.99
		}
	],
	"Alcoholic Drinks I": [{
			"name": "Beer Pack",
			"cost": 7.97
		},
		{
			"name": "Beer Pack",
			"cost": 9.97
		},
		{
			"name": "Beer Pack",
			"cost": 12.79
		},
		{
			"name": "Beer Barrel",
			"cost": 15.5
		},
		{
			"name": "Beer Barrel",
			"cost": 18.4
		}
	],
	"Alcoholic Drinks II": [{
			"name": "Vodka",
			"cost": 14.5
		},
		{
			"name": "Red Wine",
			"cost": 13.5
		},
		{
			"name": "Rose Wine",
			"cost": 19.8
		},
		{
			"name": "White Wine",
			"cost": 25.2
		},
		{
			"name": "Beer Barrel",
			"cost": 22.1
		}
	],
	"Alcoholic Drinks III": [{
			"name": "Premium Vodka",
			"cost": 23.4
		},
		{
			"name": "Japanese Whisky",
			"cost": 25.6
		},
		{
			"name": "Premium Whisky",
			"cost": 21.5
		},
		{
			"name": "Premium Whisky",
			"cost": 29.99
		}
	],
	"Pharmacy I": [{
			"name": "Hydrogen Peroxide",
			"cost": 2.7
		},
		{
			"name": "Disinfectant",
			"cost": 3.5
		},
		{
			"name": "Ibuprofen",
			"cost": 7.6
		},
		{
			"name": "Paracetamol",
			"cost": 5.6
		},
		{
			"name": "Bandaids",
			"cost": 4.2
		},
		{
			"name": "Laxative",
			"cost": 8.0
		},
		{
			"name": "Antihistamine",
			"cost": 9.5
		}
	],
	"Pharmacy II": [{
			"name": "Zinc Supplement",
			"cost": 8.99
		},
		{
			"name": "Antioxidant",
			"cost": 11.49
		},
		{
			"name": "Fish Oil",
			"cost": 12.99
		},
		{
			"name": "Algae Pills",
			"cost": 18.99
		},
		{
			"name": "Vitamins",
			"cost": 13.49
		},
		{
			"name": "Melatonin",
			"cost": 8.99
		},
		{
			"name": "Sunscreen",
			"cost": 8.95
		},
		{
			"name": "Stretch Cream",
			"cost": 13.99
		}
	],
	"Child Care I": [{
			"name": "Baby Food: Vegetables",
			"cost": 3.69
		},
		{
			"name": "Baby Food: Fish",
			"cost": 3.69
		},
		{
			"name": "Baby Food: Fruits",
			"cost": 2.89
		},
		{
			"name": "Baby Food: Meat",
			"cost": 4.49
		},
		{
			"name": "Nutritive Milk Mix",
			"cost": 4.45
		},
		{
			"name": "Nutritive Milk Powder",
			"cost": 15.99
		}
	],
	"Child Care II": [{
			"name": "Ecologic Diapers",
			"cost": 14.99
		},
		{
			"name": "Basic Diapers",
			"cost": 16.99
		},
		{
			"name": "Toddler Diapers",
			"cost": 18.99
		},
		{
			"name": "Premium Diapers",
			"cost": 23.99
		},
		{
			"name": "Aloe Baby Wipes",
			"cost": 3.99
		},
		{
			"name": "Basic Baby Wipes",
			"cost": 3.19
		},
		{
			"name": "Baby Powder",
			"cost": 3.99
		}
	],
	"Produce I": [{
			"name": "Red Apple Tray",
			"cost": 4.05
		},
		{
			"name": "Green Apple Tray",
			"cost": 2.85
		},
		{
			"name": "Clementine Tray",
			"cost": 2.79
		},
		{
			"name": "Orange Tray",
			"cost": 3.19
		},
		{
			"name": "Pear Tray",
			"cost": 2.99
		},
		{
			"name": "Lemon Tray",
			"cost": 2.13
		}
	],
	"Produce II": [{
			"name": "Mango Tray",
			"cost": 6.79
		},
		{
			"name": "Avocado Tray",
			"cost": 5.49
		},
		{
			"name": "Kiki Tray",
			"cost": 4.89
		},
		{
			"name": "Papaya Tray",
			"cost": 8.9
		},
		{
			"name": "Strawberry Tray",
			"cost": 5.65
		},
		{
			"name": "Cherry Tray",
			"cost": 6.25
		}
	],
	"Produce III": [{
			"name": "Artichoke Tray",
			"cost": 6.99
		},
		{
			"name": "Zucchini Tray",
			"cost": 6.85
		},
		{
			"name": "Carrot Tray",
			"cost": 2.45
		},
		{
			"name": "Tomato Tray",
			"cost": 2.89
		},
		{
			"name": "Potato Tray",
			"cost": 2.65
		},
		{
			"name": "Onion Tray",
			"cost": 1.89
		}
	],
	"Produce IV": [{
			"name": "Banana Pack",
			"cost": 2.99
		},
		{
			"name": "Melon",
			"cost": 3.49
		},
		{
			"name": "Pineapple",
			"cost": 3.98
		},
		{
			"name": "Pumpkin",
			"cost": 3.5
		},
		{
			"name": "Watermelon",
			"cost": 4.7
		}
	]
};

  const tableBody = document.getElementById("tableBody");
  let globalIndex = 0;

  function createTable() {
  tableBody.innerHTML = "";
  globalIndex = 0;

  for (const category in productGroups) {
    const categoryRow = document.createElement("tr");
    categoryRow.className = "category-row";
    categoryRow.innerHTML = `<td colspan="5">${category}</td>`;
    tableBody.appendChild(categoryRow);

    productGroups[category].forEach(product => {
      const row = document.createElement("tr");
      const costId = `cost-${globalIndex}`;
      const rateId = `rate-${globalIndex}`;
      const saleId = `sale-${globalIndex}`;
      const profitId = `profit-${globalIndex}`;

      row.innerHTML = `
        <td class="product-name">${product.name}</td>
        <td><input type="number" id="${costId}" value="${product.cost}" oninput="calculate(${globalIndex})" class="form-control form-control-sm" min="0" step="0.01"></td>
        <td><input type="number" id="${rateId}" oninput="calculate(${globalIndex})" class="form-control form-control-sm" placeholder="30" min="0" step="0.1"></td>
        <td id="${saleId}">$0.00</td>
        <td id="${profitId}">$0.00</td>
      `;
      tableBody.appendChild(row);
      calculate(globalIndex); // ilk deƒüerleri hesapla
      globalIndex++;
    });
  }
}

  function calculate(index) {
    const cost = parseFloat(document.getElementById(`cost-${index}`).value);
    const rate = parseFloat(document.getElementById(`rate-${index}`).value);
    const saleCell = document.getElementById(`sale-${index}`);
    const profitCell = document.getElementById(`profit-${index}`);

    if (!isNaN(cost) && !isNaN(rate)) {
      const profit = cost * (rate / 100);
      const sale = cost + profit;
      saleCell.textContent = `$${sale.toFixed(2)}`;
      profitCell.textContent = `$${profit.toFixed(2)}`;
    } else {
      saleCell.textContent = `$0.00`;
      profitCell.textContent = `$0.00`;
    }
  }

  document.getElementById('searchInput').addEventListener('input', function() {
    const filter = this.value.toLowerCase();
    const rows = document.querySelectorAll('#tableBody tr');

    let currentCategoryRow = null;
    let categoryHasVisible = false;

    rows.forEach(row => {
      if (row.classList.contains('category-row')) {
        if (currentCategoryRow && !categoryHasVisible) {
          currentCategoryRow.style.display = 'none';
        }
        currentCategoryRow = row;
        categoryHasVisible = false;
        row.style.display = '';
      } else {
        const productName = row.querySelector('.product-name').textContent.toLowerCase();
        if (productName.includes(filter)) {
          row.style.display = '';
          categoryHasVisible = true;
        } else {
          row.style.display = 'none';
        }
      }
    });

    if (currentCategoryRow && !categoryHasVisible) {
      currentCategoryRow.style.display = 'none';
    }
  });

  document.getElementById('exportExcel').addEventListener('click', function () {
    const wb = XLSX.utils.book_new();
    const ws_data = [];

    ws_data.push(["Product", "Cost ($)", "Profit (%)", "Sale Price ($)", "Profit ($)"]);

    const rows = document.querySelectorAll('#tableBody tr');

    rows.forEach(row => {
      if (row.style.display === 'none') return;
      if (row.classList.contains('category-row')) {
        ws_data.push([row.cells[0].innerText]);
        return;
      }

      const cells = row.querySelectorAll('td');
      const rowData = [];
      cells.forEach(cell => {
        const input = cell.querySelector('input');
        if (input) {
          rowData.push(input.value || '');
        } else {
          rowData.push(cell.innerText);
        }
      });
      ws_data.push(rowData);
    });

    const ws = XLSX.utils.aoa_to_sheet(ws_data);
    XLSX.utils.book_append_sheet(wb, ws, "Products");
    XLSX.writeFile(wb, "SupermarketTogether_ProfitCalculator.xlsx");
  });

  createTable();

  // T√ºm profit inputlarƒ±nƒ± se√ßip verilen oranla doldurur ve hesaplar
function setAllProfitRates(rate) {
  for (let i = 0; i < globalIndex; i++) {
    const rateInput = document.getElementById(`rate-${i}`);
    if (rateInput) {
      rateInput.value = rate;
      calculate(i);
    }
  }
}

// Butonlara tƒ±klama olayƒ±nƒ± ekle
document.querySelectorAll('.set-profit-btn').forEach(button => {
  button.addEventListener('click', () => {
    const rate = parseFloat(button.getAttribute('data-rate'));
    setAllProfitRates(rate);
  });
});

document.getElementById('customProfitBtn').addEventListener('click', () => {
  const input = document.getElementById('customProfitInput');
  let rate = parseFloat(input.value);
  if (isNaN(rate) || rate < 0) {
    alert('Please enter a valid positive profit percentage.');
    return;
  }
  setAllProfitRates(rate);
});
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


